
--------------------------------------- Const
    Î“ Í¾ Î£ Í¾ gc âŠ¢ $ k â‡ ` Bool of â„“

             Î£(n â„“Ì‚) â‰¡ just T
------------------------------------------------- Addr
    Î“ Í¾ Î£ Í¾ gc âŠ¢ addr n â„“Ì‚ â‡ Ref (T of â„“Ì‚) of â„“

         Î“ âˆ‹ x â¦‚ A
           A <: B
---------------------------------- Var
    Î“ Í¾ Î£ Í¾ gc âŠ¢ ` x â‡ B

           A âˆ· Î“ Í¾ Î£ Í¾ g âŠ¢ N â‡ B
---------------------------------------------- Lambda
    Î“ Í¾ Î£ Í¾ gc âŠ¢ Æ› N â‡ âŸ¦ g âŸ§ A â†’ B of â„“

  Î“ Í¾ Î£ Í¾ pc âŠ¢ L â‡ âŸ¦ â„“á¶œ âŸ§ A â†’ B of â„“
  Î“ Í¾ Î£ Í¾ pc âŠ¢ M â‡ A
       pcâ€² â‹ â„“ â‰¼ â„“á¶œ
      C = stamp B â„“
--------------------------------------- App
  Î“ Í¾ Î£ Í¾ pc âŠ¢ app L M â„“á¶œ A B â„“ â‡ C

    Î“ Í¾ Î£ Í¾ gc âŠ¢ L â‡ âŸ¦ â‹† âŸ§ A â†’ B of g
    Î“ Í¾ Î£ Í¾ gc âŠ¢ M â‡ A
      C = stamp B g
--------------------------------------- App!
    Î“ Í¾ Î£ Í¾ gc âŠ¢ app! L M A B g â‡ C

    Î“ Í¾ Î£ Í¾ pc âŠ¢ L â‡ ` Bool of â„“
    Î“ Í¾ Î£ Í¾ pc â‹ â„“ âŠ¢ M â‡ A
    Î“ Í¾ Î£ Í¾ pc â‹ â„“ âŠ¢ N â‡ A
      B = stamp A â„“
---------------------------------------- If
    Î“ Í¾ Î£ Í¾ pc âŠ¢ if L A â„“ M N â‡ B

    Î“ Í¾ Î£ Í¾ gc âŠ¢ L â‡ ` Bool of g
    Î“ Í¾ Î£ Í¾ â‹† âŠ¢ M â‡ A
    Î“ Í¾ Î£ Í¾ â‹† âŠ¢ N â‡ A
      B = stamp A g
---------------------------------------- If!
    Î“ Í¾ Î£ Í¾ gc âŠ¢ if! L A g M N â‡ B

    Î“ Í¾ Î£ Í¾ gc âŠ¢ M â‡ A
    A âˆ· Î“ Í¾ Î£ Í¾ gc âŠ¢ N â‡ B
--------------------------------------- Let
    Î“ Í¾ Î£ Í¾ gc âŠ¢ `let M A N â‡ B

    Î“ Í¾ Î£ Í¾ pc âŠ¢ M â‡ T of l â„“
               pc â‰¼ â„“
      A = Ref (T of l â„“) of low
-------------------------------------- Ref
    Î“ Í¾ Î£ Í¾ pc âŠ¢ refâŸ¦ â„“ âŸ§ T M â‡ A

    Î“ Í¾ Î£ Í¾ â‹† âŠ¢ M â‡ T of l â„“
      A = Ref (T of l â„“) of low
-------------------------------------- Ref?
    Î“ Í¾ Î£ Í¾ â‹† âŠ¢ ref?âŸ¦ â„“ âŸ§ T M â‡ A

    Î“ Í¾ Î£ Í¾ pc âŠ¢ L â‡ Ref (T of l â„“Ì‚) of l â„“
    Î“ Í¾ Î£ Í¾ pc âŠ¢ M â‡ T of l â„“Ì‚
         pc â‹ â„“ â‰¼ â„“Ì‚
--------------------------------------------- Assign
    Î“ Í¾ Î£ Í¾ pc âŠ¢ assign L M T â„“Ì‚ â„“ â‡ ` Unit of l low

  *** TBA ***

   Î“ Í¾ Î£ Í¾ gc âŠ¢ M â‡ A   c : A â‡’ B
-------------------------------------------- Cast
   Î“ Í¾ Î£ Í¾ gc âŠ¢ M âŸ¨ c âŸ© â‡ B

------------------------------------ Blame
   Î“ Í¾ Î£ Í¾ gc âŠ¢ blame p â‡ A


app (Æ› N) V â„“á¶œ A B â„“ âˆ£ Î¼ âˆ£ pc â€”â†’ (â¦ƒ â„“á¶œ â¦„ (N[ V ])) âŸ¨ B â‡’ stamp B â„“ âŸ© âˆ£ Î¼


          pc âŸ¨ pc â‡’ â„“á¶œ âŸ© âŸ¨ dâ‚— âŸ© â€”â†  ğ“‹
-----------------------------------------------------------
app ((Æ› N) âŸ¨ dâ‚— | c â†’ d | câ‚— âŸ©) V â„“á¶œ A B â„“ âˆ£ Î¼ âˆ£ pc â€”â†’
    (â¦ƒ ğ“‹ â¦„ let (V âŸ¨ c âŸ©) in (N âŸ¨ d âŸ©)) âŸ¨ B â‡’ stamp B â„“ âŸ© âˆ£ Î¼


       stamp ğ“‹ â„“ âŸ¨ stamp ty(ğ“‹) â„“ â‡’ â‹† âŸ© â€”â†  ğ“‹â€²
----------------------------------------------------------------------------
app! (Æ› N) V A B â„“ âˆ£ Î¼ âˆ£ ğ“‹ â€”â†’ (â¦ƒ ğ“‹â€² â¦„ (N[ V ])) âŸ¨ B â‡’ stamp B â„“ âŸ© âˆ£ Î¼

          stamp ğ“‹ âˆ¥ câ‚— âˆ¥ âŸ¨ stamp ty(ğ“‹) g â‡’ â‹† âŸ© âŸ¨ dâ‚— âŸ© â€”â†  ğ“‹â€²
-----------------------------------------------------------
app! ((Æ› N) âŸ¨ dâ‚— | c â†’ d | câ‚— âŸ©) V A B g âˆ£ Î¼ âˆ£ ğ“‹ â€”â†’
    (â¦ƒ ğ“‹â€² â¦„ let (V âŸ¨ c âŸ©) in (N âŸ¨ d âŸ©)) âŸ¨ B â‡’ stamp B â„“ âŸ© âˆ£ Î¼
